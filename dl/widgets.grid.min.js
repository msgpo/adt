(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){e(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],e)}else{e(t.adt=t.adt||{})}})(this,function(t){"use strict";if(t.widgets){var e=t.widgets}else{throw new Error("adt.widgets.grid Error: widgets module is not exported")}function r(t,r){var i=e.Widget.call(this,t,"grid","div",r);var a=i.attr.x;var d=i.attr.y;var h=1;var n=1;var o=[];var s=[];var l=false;var u=null;function f(){o.forEach(function(t){t.forEach(function(t){if(t){t.remove()}})});o=[];for(var t=0;t<n;t++){o.push([]);for(var e=0;e<h;e++){o[t].push(null)}}}this.x=function(t,e){i.attr.x=e!=="%"?t:window.innerWidth*t/100;a=i.attr.x;return this};this.y=function(t,e){i.attr.y=e!=="%"?t:window.innerHeight*t/100;d=i.attr.y;return this};this.rows=function(t){h=t;f();return this};this.cols=function(t){n=t;f();return this};this.flexible=function(t){window.onresize=function(){if(!t){return}clearTimeout(u);u=setTimeout(function(){var t=i.attr.width/window.innerWidth;var e=i.attr.height/window.innerHeight;i.attr.x=a/=t;i.attr.y=d/=e;i.attr.width/=t;i.attr.height/=e;i.widget.style("position","absolute").style(i.attr.x>0?"left":"right",Math.abs(i.attr.x)+i.attr.xDim).style(i.attr.y>0?"top":"bottom",Math.abs(i.attr.y)+i.attr.yDim).style("width",i.attr.width+"px").style("height",i.attr.height+"px");i.widget.selectAll(".grid-border-h").style("top",function(){return d3.select(this).attr("data-y")*i.attr.height/h-1+"px"}).style("width",i.attr.width+"px");i.widget.selectAll(".grid-border-v").style("left",function(){return d3.select(this).attr("data-x")*i.attr.width/n-1+"px"}).style("height",i.attr.height+"px");s.forEach(function(t){t.widget.x(t.x*i.attr.width/n+i.attr.x).y(t.y*i.attr.height/h+i.attr.y).width(t.width*i.attr.width/n).height(t.height*i.attr.height/h).render(0)})},700)};return this};function g(t){if(t){l=true;i.widget.style("box-shadow","0 0 1px black inset");for(var e=1;e<h;e++){i.widget.append("div").attr("class","grid-border-h").attr("data-y",e).style("position","absolute").style("left","0").style("top",e*i.attr.height/h-.5+"px").style("width",i.attr.width+"px").style("height","1px").style("background-color","grey")}for(var r=1;r<n;r++){i.widget.append("div").attr("class","grid-border-v").attr("data-x",r).style("position","absolute").style("left",r*i.attr.width/n-.5+"px").style("top","0").style("width","1px").style("height",i.attr.height+"px").style("background-color","grey")}}else{l=false;i.widget.style("border",null);i.widget.selectAll(".grid-border-h").remove();i.widget.selectAll(".grid-border-v").remove()}}this.show=g;this.add=function(t,e,r,a,d){if(e<0||a<1||e+a>n||r<0||d<1||r+d>h){t.remove();return null}for(var l=e;l<e+a;l++){if(o[l]){for(var u=r;u<r+d;u++){if(o[l][u]){t.remove();return null}}}}s.push({x:e,y:r,width:a,height:d,widget:t});for(l=e;l<e+a;l++){for(u=r;u<r+d;u++){o[l][u]=t}}t.x(e*i.attr.width/n+i.attr.x).y(r*i.attr.height/h+i.attr.y).width(a*i.attr.width/n).height(d*i.attr.height/h).render();return t};this.get=function(t,e){if(o[e]&&o[e][t]){return o[e][t].widget}else{return null}};i.render.build=function(){};i.render.update=function(t){};i.render.style=function(){i.widget.style("width",i.attr.width+"px").style("height",i.attr.height+"px");i.widget.style("display","block")}}r.prototype=Object.create(e.Widget.prototype);t.widgets.Grid=r});