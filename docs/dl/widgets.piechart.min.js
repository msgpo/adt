(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("./widgets"),exports)}else if(typeof define==="function"&&define.amd){define(["d3","widgets","exports"],e)}else{t.adt=t.adt||{};t.adt.widgets=t.adt.widgets||{};t.adt.widgets.PieChart=e(t.d3,t.adt.widgets.Widget,t)}})(this,function(t,e){"use strict";function a(a,r){var i=e.call(this,a,"pieChart","svg",r);i.attr.add(this,"innerRadius",0,"dim");i.attr.add(this,"outerRadius",50,"dim");var n=null;var s=[{name:"data",value:1,color:"white"}];this.data=function(t){s=t;return this};this.highlight=function(t,e){i.utils.highlight(n,"path",t,e)};i.render.build=function(){if(n!==null)return;n={};n.g=i.widget.append("g");n.label=n.g.append("text").attr("text-anchor","middle").attr("stroke-width","0px").style("fill","white");n.arc=t.arc();n.pie=t.pie().value(function(t){return t.value});n.paths=n.g.datum(s).selectAll("path").data(n.pie).enter().append("path").attr("class",function(t,e){return i.utils.encode(s[e].name)}).attr("fill",function(t,e){return s[e].color}).style("shape-rendering","geometricPrecision").style("pointer-events","all").attr("d",n.arc).each(function(t){this._current=t})};i.render.update=function(e){n.g.datum(s);n.paths.data(n.pie);n.paths.attr("d",n.arc).transition().duration(e).attrTween("d",function(e){var a=t.interpolate(this._current,e);this._current=a(0);return function(t){return n.arc(a(t))}})};i.render.style=function(){var t=i.attr.outerRadius-i.attr.margins.left;i.widget.style("width",2*i.attr.outerRadius+"px").style("height",2*i.attr.outerRadius+"px");n.g.attr("transform","translate("+i.attr.outerRadius+","+i.attr.outerRadius+")");n.arc.outerRadius(t).innerRadius(i.attr.innerRadius);n.paths.attr("d",n.arc);n.label.attr("transform","translate(0,"+i.attr.outerRadius+")").style("width",10+2*i.attr.outerRadius+"px").style("font-size",Math.min(16,i.attr.outerRadius*.4)+"px").style("fill",i.attr.fontColor).text(i.attr.xLabel);n.paths.on("mouseover",function(t,e){i.attr.mouseover&&i.attr.mouseover(t.data.name,e)});n.paths.on("mouseleave",function(t,e){i.attr.mouseleave&&i.attr.mouseleave(t.data.name,e)});n.paths.on("click",function(t,e){i.attr.click&&i.attr.click(t.data.name,e)})}}a.prototype=Object.create(e.prototype);return a});