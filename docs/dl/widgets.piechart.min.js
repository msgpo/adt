(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){e(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],e)}else{e(t.adt=t.adt||{})}})(this,function(t){"use strict";if(t.widgets){var e=t.widgets}else{throw new Error("adt.widgets.piechart Error: widgets module is not exported")}function r(t,r){var a=e.Widget.call(this,t,"pieChart","svg",r);a.attr.add(this,"innerRadius",0,"dim");a.attr.add(this,"outerRadius",50,"dim");a.attr.add(this,"label","");a.attr.add(this,"mouseover",null);a.attr.add(this,"mouseleave",null);var i=null;var n=[{name:"data",value:1,color:"white"}];this.data=function(t){n=t;return this};this.highlight=function(t){a.utils.highlight(i,"path",t)};a.render.build=function(){if(i!==null)return;i={};i.g=a.widget.append("g");i.label=i.g.append("text").attr("text-anchor","middle").attr("stroke-width","0px").style("fill","white");i.arc=d3.arc();i.pie=d3.pie().value(function(t){return t.value});i.paths=i.g.datum(n).selectAll("path").data(i.pie).enter().append("path").attr("class",function(t,e){return a.utils.encode(n[e].name)}).attr("fill",function(t,e){return n[e].color}).style("shape-rendering","geometricPrecision").style("pointer-events","all").attr("d",i.arc).each(function(t){this._current=t})};a.render.update=function(t){i.g.datum(n);i.path.data(i.pie);i.path.attr("d",i.arc).transition().duration(t).attrTween("d",function(t){var e=d3.interpolate(this._current,t);this._current=e(0);return function(t){return i.arc(e(t))}})};a.render.style=function(){a.widget.style("width",10+2*a.attr.outerRadius+"px").style("height",10+2*a.attr.outerRadius+30+"px");i.g.attr("transform","translate("+(5+a.attr.outerRadius)+","+(5+a.attr.outerRadius)+")");i.arc.outerRadius(a.attr.outerRadius).innerRadius(a.attr.innerRadius);i.paths.attr("d",i.arc);i.label.attr("transform","translate(0,"+(15+a.attr.outerRadius)+")").style("width",10+2*a.attr.outerRadius+"px").style("font-size",Math.min(16,a.attr.outerRadius*.4)+"px").style("fill",a.attr.fontColor).text(a.attr.label);if(a.attr.mouseover){i.paths.on("mouseover",function(t,e){a.attr.mouseover(n[e],e)})}if(a.attr.mouseleave){i.paths.on("mouseleave",function(t,e){a.attr.mouseleave(n[e],e)})}a.widget.style("display","block")}}r.prototype=Object.create(e.Widget.prototype);t.widgets.PieChart=r});