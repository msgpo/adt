(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){e(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],e)}else{e(t.adt=t.adt||{})}})(this,function(t){"use strict";if(t.widgets){var e=t.widgets}else{throw new Error("adt.widgets.slider Error: widgets module is not exported")}function r(t,r){var a=e.Widget.call(this,t,"slider","svg",r);a.attr.add(this,"min",0);a.attr.add(this,"max",1);a.attr.add(this,"step",0);a.attr.add(this,"label","");a.attr.add(this,"callback",null);var n=null;var i={right:20,left:20};var l=false;var s=[];var d=null;a.render.build=function(){if(n!==null)return;n={};s=[a.attr.min,a.attr.max];d=d3.scaleLinear().domain(s).range([0,a.attr.width-i.left-i.right]).clamp(true);if(a.attr.step){l=true;s=[];for(var t=a.attr.min;t<=a.attr.max;t+=a.attr.step){s.push(t)}d=d3.scalePoint().domain(s).range([0,a.attr.width-i.left-i.right])}n.g=a.widget.append("g").attr("transform","translate("+i.left+",20)");n.g.append("line").attr("stroke-linecap","round").attr("stroke",a.attr.fontColor).attr("stroke-width","10px").attr("x1",d.range()[0]).attr("x2",d.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(true))}).style("stroke","#eee").style("stroke-width","8px").select(function(){return this.parentNode.appendChild(this.cloneNode(true))}).style("cursor","pointer").style("pointer-events","stroke").style("stroke","transparent").style("stroke-width","50px").call(d3.drag().on("start drag",function(){var t=null;if(l){var e=d3.event.x;t=s.reduce(function(t,r){return Math.abs(d(r)-e)<Math.abs(d(t)-e)?r:t})}else{t=d.invert(d3.event.x)}n.handle.attr("cx",d(t));if(a.attr.callback){a.attr.callback(t)}}));n.g.insert("g",".track-overlay").style("font","10px sans-serif").attr("transform","translate(0,"+18+")").selectAll("text").data(l?s:d.ticks(5)).enter().append("text").attr("x",d).attr("text-anchor","middle").attr("fill",a.attr.fontColor).text(function(t){return t});n.handle=n.g.insert("circle",".track-overlay").style("fill","white").style("stroke",a.attr.fontColor).style("stroke-width","1.2px").attr("r",8)};a.render.update=function(t){};a.render.style=function(){a.widget.style("width",a.attr.width+"px");a.widget.style("height",50+"px");a.widget.style("display","block")}}r.prototype=Object.create(e.Widget.prototype);t.widgets.Slider=r});